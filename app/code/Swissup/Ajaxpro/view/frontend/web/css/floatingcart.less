@S: 480px;
@M: 768px;
@L: 1170px;

@color-1: #2b3e51; /* Pickled Bluewood */
@color-2: #2c97de; /* Curious Blue */
@color-3: #ffffff; /* White */
@color-4: #ecf0f1; /* Porcelain */
@color-5: #323232; /* Cinnabar */

@z-index1: 800;
@z-index2: 801;
@z-index3: 802;

[data-block="ajaxpro-floating-cart"].minicart-wrapper {
    margin: 0 !important;
    padding: 0 !important;
}

.cd-cart-container::before {
    content: '';
    position: fixed;
    z-index: @z-index1;
    height: 100vh;
    width: 100vw;
    top: 0;
    left: 0;
    background: rgba(0, 0, 0, 0.5);
    opacity: 0;
    visibility: hidden;
    transition: opacity .4s, visibility .4s;
}

.cd-cart-container.cart-open::before {
    opacity: 1;
    visibility: visible;
}

.cd-cart-trigger,
.cd-cart {
    position: fixed;
    bottom: 20px;
    right: 5%;
    transition: transform .2s;
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    will-change: transform;
    backface-visibility: hidden;

    .rtl & {
        right: auto;
        left: 5%;
    }

    .empty & {
        transition: transform .2s, 0s visibility .4s;
        transform: translateY(150px);
        visibility: hidden;
    }

    @media only screen and (min-width: @L) {
        bottom: 40px;
    }
}

.cd-cart-trigger {
    z-index: @z-index3;
    height: 72px;
    width: 72px;
    text-indent: -9999px;
    color: transparent;
    white-space: nowrap;

    .rtl & {
        text-indent: 9999px;
    }

    &:hover {
        color: transparent;
    }

    &::after, &::before {
        content: '';
        position: absolute;
        left: 50%;
        top: 50%;
        bottom: auto;
        right: auto;
        transform: translateX(-50%) translateY(-50%);
        height: 100%;
        width: 100%;
        background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIxNDRweCIgaGVpZ2h0PSI3MnB4IiB2aWV3Qm94PSIwIDAgMTQ0IDcyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxNDQgNzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMCwgMjApIj4KCQoJCTxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM0MzQzNCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjciIHkxPSIxMSIgeDI9IjEzIiB5Mj0iMiIvPgoJCgkJPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzQzNDM0IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMjUiIHkxPSIxMSIgeDI9IjE5IiB5Mj0iMiIvPgoJCgkJPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM0MzQzNCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIKCQkyOCwxNSAyNiwyOSA2LDI5IDQsMTUgCSIvPgoJCgkJPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzQzNDM0IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMSIgeTE9IjExIiB4Mj0iMzEiIHkyPSIxMSIvPgo8L2c+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkyLCAyMCkiPgoJCgkJPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzQzNDM0IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMjciIHkxPSI1IiB4Mj0iNSIgeTI9IjI3Ii8+CgkKCQk8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMzNDM0MzQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIyNyIgeTE9IjI3IiB4Mj0iNSIgeTI9IjUiLz4KPC9nPgo8L3N2Zz4K') no-repeat 0 0;
        transition: opacity .2s, transform .2s;
    }

    &::after {
        background-position: -72px 0;
        opacity: 0;
        transform: translateX(-50%) translateY(-50%) rotate(90deg);
    }

    .cart-open &::before {
        opacity: 0;
    }

    .cart-open &::after {
        opacity: 1;
        transform: translateX(-50%) translateY(-50%);
    }

    .count {
        position: absolute;
        top: -10px;
        right: -10px;
        height: 28px;
        width: 28px;
        background: @color-5;
        color: @color-3;
        font-size: 1.1em;
        font-weight: bold;
        border-radius: 50%;
        text-indent: 0;
        transition: transform .2s .5s;
        list-style: none;
        padding: 0;
        li {
            position: absolute;
            transform: translateZ(0);
            left: 50%;
            top: 50%;
            bottom: auto;
            right: auto;
            transform: translateX(-50%) translateY(-50%);
            &:last-of-type {
                visibility: hidden;
            }
            padding: 0;
        }
    }

    .cart-open & .count {
        transition: transform .2s 0s;
        transform: scale(0);
    }

    .empty & .count {
        transform: scale(1);
    }

    &:hover + div .wrapper {
        box-shadow: 0 6px 40px rgba(0, 0, 0, .3);
    }

    .cart-open &:hover + div .wrapper {
        box-shadow: 0 4px 30px rgba(0, 0, 0, .17);
    }
}

.cd-cart {
    z-index: @z-index2;
    width: 90%;
    max-width: 440px;
    height: 400px;
    max-height: 90%;
    pointer-events: none;

    .wrapper {
        position: absolute;
        bottom: 0;
        right: 0;
        .rtl & {
            right: auto;
            left: 0;
        }
        z-index: @z-index2;
        overflow: hidden;
        height: 72px;
        width: 72px;
        border-radius: 6px;
        transition: height .4s .1s, width  .4s .1s, box-shadow .3s;
        transition-timing-function: cubic-bezier(.67,.17,.32,.95);
        background: @color-3;
        box-shadow: 0 4px 30px rgba(0, 0, 0, .17);
        pointer-events: auto;
        .minicart-items-wrapper {
            border: 0;
            margin: 0;
            padding: 0;
            height: 100% !important;
            .product-item {
                padding: 10px;
                margin: 0;
                .subtitle {
                    display: none;
                }
                > .product {
                    position: relative;
                }
            }
            .product-item-name {
                display: block;
                max-width: ~"calc(100% - 70px)";
            }
            .price-container {
                position: absolute;
                top: 0;
                right: 0;
                margin: 0;
                .rtl & {
                    right: auto;
                    left: 0;
                }
                .price-excluding-tax {
                    margin: 0;
                }
                .price {
                    font-size: 16px;
                    font-weight: bold;
                }
            }
        }
    }

    header, footer {
        position: absolute;
        z-index: @z-index2;
        left: 0;
        width: 100%;
        box-sizing: border-box;
    }

    header, .body {
        opacity: 0;
    }

    header {
        top: 0;
        border-radius: 6px 6px 0 0;
        padding: 0 1.4em;
        height: 40px;
        line-height: 40px;
        background-color: @color-3;
        transition: opacity .2s 0s;
        border-bottom: 1px solid #e6e6e6;
    }

    footer {
        bottom: 0;
        border-radius: 0 0 6px 6px;
        box-shadow: 0 -2px 20px rgba(0, 0, 0, .15);
        background: @color-3;
    }

    .checkout {
        display: block;
        height: 72px;
        line-height: 72px;
        margin-right: 72px;
        .rtl & {
            margin-right: 0;
            margin-left: 72px;
        }
        background: @color-2;
        color: rgba(255, 255, 255, 0);
        text-align: center;
        font-size: 20px;
        font-weight: 600;
        transition: all .2s 0s;

        &:hover {
            background: lighten(@color-2, 3%);
        }

        em {
            visibility: hidden;
            font-style: normal;
            position: relative;
            display: inline-block;
            transform: translateX(40px);
            transition: transform 0s .2s;
        }

        em::after {
            position: absolute;
            top: 50%;
            bottom: auto;
            transform: translateY(-50%);

            right: 0;
            content: '';
            height: 24px;
            width: 24px;
            background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIzIiB5MT0iMTIiIHgyPSIyMSIgeTI9IjEyIi8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iCgkxNSw2IDIxLDEyIDE1LDE4ICIvPgo8L3N2Zz4K') no-repeat center center;
            opacity: 0;
            transition: opacity .2s;

            .rtl & {
                right: auto;
                left: 0;
                transform: rotate(180deg) translateY(-50%);
                transform-origin: 0 0;
            }
        }
    }

    .body {
        height: ~"calc(100% - 112px)";
        margin: 40px 0 0;
        transition: opacity .2s;

        .minicart-items {
            overflow-x: hidden;
            padding: 10px;
        }

        li {
            opacity: 0;
            transform: translateX(80px);
            transition: opacity 0s .2s, transform 0s .2s;

            &:not(:last-of-type) {
                margin-bottom: 20px;
            }
        }
        .subtitle.empty {
            margin: 50px;
        }
    }

    .cart-open & .wrapper {
        height: 100%;
        width: 100%;
        transition-delay: 0s;
    }

    .cart-open & header,
    .cart-open & .body {
        opacity: 1;
    }

    .cart-open & header {
        transition: opacity .2s .2s;
    }

    .cart-open & .body {
        transition: opacity 0s;

        li {
            transition: transform .3s .2s, opacity .3s .2s;
            opacity: 1;
            transform: translateX(0);

            &:nth-of-type(2) {
                transition-duration: .4s;
            }

            &:nth-of-type(3) {
                transition-duration: .5s;
            }

            &:nth-of-type(4),
            &:nth-of-type(5) {
                transition-duration: .55s;
            }
        }
    }

    .cart-open & .checkout {
        color: @color-3;
        transition: color .2s .3s;

        em {
            visibility: visible;
            transform: translateX(0);
            transition: transform .2s .3s, padding .2s 0s;
        }

        &:hover em {
            padding-right: 30px;

            .rtl & {
                padding-right: 0;
                padding-left: 30px;
            }

            &::after {
                opacity: 1;
            }
        }
    }

    @media only screen and (min-width: @M) {
        .checkout {
            font-size: 24px;
        }
    }
}
