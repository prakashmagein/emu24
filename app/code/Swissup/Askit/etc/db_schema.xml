<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
  <table name="swissup_askit_vote" resource="default" engine="innodb" comment="swissup_askit_vote">
    <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true" comment="Id"/>
    <column xsi:type="int" name="item_id" padding="10" unsigned="true" nullable="false" identity="false" comment="Item Id" disabled="true"/>
    <column xsi:type="int" name="customer_id" padding="10" unsigned="true" nullable="false" identity="false" comment="Customer Id"/>
    <column xsi:type="int" name="message_id" padding="10" unsigned="true" nullable="false" identity="false" comment="Message Id" onCreate="migrateDataFrom(item_id)"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="id"/>
    </constraint>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_VOTE_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID" table="swissup_askit_vote" column="customer_id" referenceTable="customer_entity" referenceColumn="entity_id" onDelete="CASCADE"/>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_VOTE_ITEM_ID_SWISSUP_ASKIT_ITEM_ID" table="swissup_askit_vote" column="item_id" referenceTable="swissup_askit_item" referenceColumn="id" onDelete="CASCADE" disabled="true"/>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_VOTE_MESSAGE_ID_SWISSUP_ASKIT_MESSAGE_ID" table="swissup_askit_vote" column="message_id" referenceTable="swissup_askit_message" referenceColumn="id" onDelete="CASCADE"/>
    <index referenceId="SWISSUP_ASKIT_VOTE_ITEM_ID" indexType="btree" disabled="true">
      <column name="item_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_VOTE_CUSTOMER_ID" indexType="btree">
      <column name="customer_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_VOTE_MESSAGE_ID" indexType="btree">
      <column name="message_id"/>
    </index>
  </table>
  <table name="swissup_askit_message" resource="default" engine="innodb" comment="swissup_askit_item">
    <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true" comment="Id"/>
    <column xsi:type="int" name="parent_id" padding="10" unsigned="true" nullable="true" identity="false" comment="Parent Id"/>
    <column xsi:type="smallint" name="item_type_id" padding="5" unsigned="true" nullable="false" identity="false" default="1" comment="Item Type Id" disabled="true"/>
    <column xsi:type="int" name="item_id" padding="11" unsigned="false" nullable="true" identity="false" comment="Item Id" disabled="true"/>
    <column xsi:type="smallint" name="store_id" padding="5" unsigned="true" nullable="false" identity="false" comment="Store Id"/>
    <column xsi:type="int" name="customer_id" padding="10" unsigned="true" nullable="true" identity="false" comment="Customer Id"/>
    <column xsi:type="varchar" name="customer_name" nullable="false" length="128" default="" comment="Customer Name"/>
    <column xsi:type="varchar" name="email" nullable="false" length="128" default="" comment="Email"/>
    <column xsi:type="text" name="text" nullable="false" comment="Text"/>
    <column xsi:type="smallint" name="hint" padding="6" unsigned="false" nullable="false" identity="false" default="0" comment="Hint"/>
    <column xsi:type="smallint" name="status" padding="6" unsigned="false" nullable="false" identity="false" default="1" comment="Status"/>
    <column xsi:type="datetime" name="created_time" on_update="false" nullable="true" comment="Created Time"/>
    <column xsi:type="datetime" name="update_time" on_update="false" nullable="true" comment="Update Time"/>
    <column xsi:type="smallint" name="is_private" padding="6" unsigned="false" nullable="false" identity="false" default="0" comment="Private"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="id"/>
    </constraint>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_ITEM_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID" table="swissup_askit_item" column="customer_id" referenceTable="customer_entity" referenceColumn="entity_id" onDelete="SET NULL" disabled="true"/>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_ITEM_STORE_ID_STORE_STORE_ID" table="swissup_askit_item" column="store_id" referenceTable="store" referenceColumn="store_id" onDelete="CASCADE" disabled="true"/>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_MESSAGE_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID" table="swissup_askit_message" column="customer_id" referenceTable="customer_entity" referenceColumn="entity_id" onDelete="SET NULL"/>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_MESSAGE_STORE_ID_STORE_STORE_ID" table="swissup_askit_message" column="store_id" referenceTable="store" referenceColumn="store_id" onDelete="CASCADE"/>
    <index referenceId="SWISSUP_ASKIT_ITEM_ITEM_ID" indexType="btree" disabled="true">
      <column name="item_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_ITEM_CUSTOMER_ID" indexType="btree" disabled="true">
      <column name="customer_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_ITEM_STORE_ID" indexType="btree" disabled="true">
      <column name="store_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_ITEM_TEXT" indexType="fulltext" disabled="true">
      <column name="text"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_MESSAGE_ITEM_ID" indexType="btree" disabled="true">
      <column name="item_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_MESSAGE_CUSTOMER_ID" indexType="btree">
      <column name="customer_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_MESSAGE_STORE_ID" indexType="btree">
      <column name="store_id"/>
    </index>
    <index referenceId="SWISSUP_ASKIT_MESSAGE_TEXT" indexType="fulltext">
      <column name="text"/>
    </index>
  </table>
  <table name="swissup_askit_item" resource="default" engine="innodb" comment="Askit Assign Item Table">
    <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true" comment="Id"/>
    <column xsi:type="int" name="message_id" padding="10" unsigned="true" nullable="true" identity="false" comment="Massage Id"/>
    <column xsi:type="int" name="item_id" padding="10" unsigned="true" nullable="true" identity="false" comment="Item Id (product_id, cms page id or category id)"/>
    <column xsi:type="smallint" name="item_type_id" padding="5" unsigned="true" nullable="false" identity="false" default="1" comment="Item Type Id"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="id"/>
    </constraint>
    <constraint xsi:type="foreign" referenceId="SWISSUP_ASKIT_ITEM_MESSAGE_ID_TM_ASKIT_MESSAGE_ID" table="swissup_askit_item" column="message_id" referenceTable="swissup_askit_message" referenceColumn="id" onDelete="CASCADE"/>
    <constraint xsi:type="unique" referenceId="SWISSUP_ASKIT_ITEM_MESSAGE_ID_ITEM_ID_ITEM_TYPE_ID">
      <column name="message_id"/>
      <column name="item_id"/>
      <column name="item_type_id"/>
    </constraint>
    <index referenceId="SWISSUP_ASKIT_ITEM_MESSAGE_ID" indexType="btree">
      <column name="message_id"/>
    </index>
  </table>
</schema>
